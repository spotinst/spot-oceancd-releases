# spot-oceancd-operator

![Version: 1.2.4](https://img.shields.io/badge/Version-1.2.4-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.2.4](https://img.shields.io/badge/AppVersion-1.2.4-informational?style=flat-square)

A Helm chart for spot-oceancd-operator

1. Install OLM

```sh
curl -sL https://github.com/operator-framework/operator-lifecycle-manager/releases/download/v0.20.0/install.sh | bash -s v0.20.0
```

2. Add the OceanCD Helm chart repository:

```sh
helm repo add oceancd https://charts.oceancd.io
```

3. Update your local Helm chart repository cache:

```sh
helm repo update
```

4. Install `spot-oceancd-operator`:

```sh
helm install ${RELEASE_NAME} oceancd/spot-oceancd-operator \
  --namespace ${RELEASE_NAMESPACE} \
  --create-namespace \
  --set token=REDACTED \
  --set clusterId=REDACTED \
  # [...]
```

> NOTE: Please configure all required chart values using the `set` command line argument or a `values.yaml` file.
> 
> Install using Helm template is not supported


Uninstall `spot-oceancd-operator`:

```sh
helm uninstall ${RELEASE_NAME} 
kubectl get csv -A | grep spot-oceancd-operator | awk '{system("kubectl delete csv " $2 " -n " $1)}'
```

Uninstall `OLM`:
```sh
kubectl delete apiservices v1.packages.operators.coreos.com
kubectl delete -f https://github.com/operator-framework/operator-lifecycle-manager/releases/download/v0.20.0/crds.yaml
kubectl delete -f https://github.com/operator-framework/operator-lifecycle-manager/releases/download/v0.20.0/olm.yaml
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| apiUrl | string | `"https://api.spotinst.io"` | (Optional) Spot Api URL |
| argoRollouts.create | bool | `true` | (Optional) If create argo-rollouts |
| argoRollouts.keepCRDs | bool | `true` | (Optional) If keep argo-rollouts crds |
| argoRollouts.createNamespace | bool | `true` | (Optional) If create argo-rollouts namespace |
| argoRollouts.deployment.affinity | object | `{}` | (Optional) Assign custom [affinity] rules to the argo rollout deployment |
| argoRollouts.deployment.containerSecurityContext | object | `{}` | (Optional) Security Context to set on container level |
| argoRollouts.deployment.extraArgs | list | `[]` | (Optional) Additional command line arguments to pass to rollouts-controller.  A list of flags. |
| argoRollouts.deployment.nodeSelector | object | `{}` | (Optional) Node selector |
| argoRollouts.deployment.podSecurityContext | object | `{"runAsNonRoot":true}` | (Optional) Security Context to set on pod level |
| argoRollouts.deployment.resources | object | `{}` | (Optional) Resource limits and requests for the argo rollouts controller pods. |
| argoRollouts.deployment.tolerations | list | `[]` | (Optional) Tolerations for use with node taints |
| argoRollouts.serviceAccount.annotations | object | `{}` | (Optional) Service Account Annotations |
| channel | string | `"stable"` | (Optional) Operator Catalog channel |
| clusterId | string | `""` | (Required) Cluster ID |
| operator.env | list | `[]` | (Optional) List of Environment Variables that must exist in all containers in the Pod created by OLM. |
| operator.envFrom | list | `[]` | (Optional) List of sources to populate Environment Variables in the container. |
| operator.nodeSelector | object | `{}` | (Optional) Node selector for the pod created by OLM |
| operator.resources | object | `{}` | (Optional) Resource limits and requests for the pod created by OLM. |
| operator.tolerations | list | `[]` | (Optional) Tolerations for the Pod created by OLM. |
| operator.volumeMounts | list | `[]` | (Optional) list of VolumeMounts that must exist in all containers in the Pod created by OLM. |
| operator.volumes | list | `[]` | (Optional) List of Volumes that must exist on the Pod created by OLM. |
| saasUrl | string | `"https://cluster-gateway.oceancd.io"` | (Optional) Saas URL |
| token| string | `""` | (Optional) Spot Token |
| tokenExistingSecret | string | "" | (Optional) Use existing Secret which stores spot token. The value should be set with the `spot-token` key inside the secret. 

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.7.0](https://github.com/norwoodj/helm-docs/releases/v1.7.0)
